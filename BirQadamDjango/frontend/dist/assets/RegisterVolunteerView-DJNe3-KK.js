import{d as S,r as g,j as V,e as q,b as t,w as o,a as n,o as B,h as u,k as C,g as p,t as T}from"./index-DHK4OPTE.js";import{r as j}from"./webPortal-BANlqBB7.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"form-section py-12 py-md-16"},F={class:"d-flex align-center mb-6 ga-4"},I={class:"d-flex flex-column flex-sm-row ga-4"},M=S({__name:"RegisterVolunteerView",setup($){const m=g(null),f=g(!1),r=V({show:!1,color:"success",message:""}),a=V({fullName:"",phoneNumber:"",email:"",password:""}),i={required:l=>!!l||"Поле обязательно для заполнения.",email:l=>l?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(l)||"Введите корректный email.":!0,phone:l=>l.replace(/[^0-9+]/g,"").length>=11||"Введите корректный номер телефона.",password:l=>l?l.length>=8||"Пароль должен содержать не менее 8 символов.":!0},x=()=>{m.value?.reset(),m.value?.resetValidation()},v=(l,e)=>{r.message=l,r.color=e,r.show=!0},h=async()=>{const{valid:l}=await m.value?.validate()??{valid:!1};if(l){f.value=!0;try{await j({full_name:a.fullName,phone_number:a.phoneNumber,email:a.email||void 0,password:a.password||void 0}),v("Регистрация успешно завершена.","success"),x()}catch(e){const _=e?.response?.data?.detail||"Не удалось завершить регистрацию.";v(_,"error")}finally{f.value=!1}}};return(l,e)=>{const _=n("v-icon"),y=n("v-avatar"),c=n("v-text-field"),d=n("v-col"),w=n("v-row"),N=n("v-alert"),b=n("v-btn"),k=n("v-form"),U=n("v-card"),z=n("v-container"),R=n("v-snackbar");return B(),q("section",D,[t(z,null,{default:o(()=>[t(w,{class:"justify-center"},{default:o(()=>[t(d,{cols:"12",md:"8",lg:"6"},{default:o(()=>[t(U,{class:"pa-8 pa-md-10 elevation-8"},{default:o(()=>[u("div",F,[t(y,{color:"warning",size:"52"},{default:o(()=>[t(_,{icon:"mdi-account-heart-outline",size:"32"})]),_:1}),e[5]||(e[5]=u("div",null,[u("h1",{class:"text-h5 text-md-h4 font-weight-bold mb-1"},"Регистрация волонтёра"),u("p",{class:"text-body-2 text-medium-emphasis mb-0"}," Создайте аккаунт, чтобы участвовать в проектах и отслеживать прогресс. ")],-1))]),t(k,{ref_key:"formRef",ref:m,onSubmit:C(h,["prevent"])},{default:o(()=>[t(w,null,{default:o(()=>[t(d,{cols:"12"},{default:o(()=>[t(c,{modelValue:a.fullName,"onUpdate:modelValue":e[0]||(e[0]=s=>a.fullName=s),label:"Полное имя",variant:"outlined","prepend-inner-icon":"mdi-account",rules:[i.required],autocomplete:"name"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(c,{modelValue:a.phoneNumber,"onUpdate:modelValue":e[1]||(e[1]=s=>a.phoneNumber=s),label:"Номер телефона",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:[i.required,i.phone],autocomplete:"tel"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(c,{modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=s=>a.email=s),label:"Email (опционально)",variant:"outlined","prepend-inner-icon":"mdi-email-outline",rules:[i.email],autocomplete:"email"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(c,{modelValue:a.password,"onUpdate:modelValue":e[3]||(e[3]=s=>a.password=s),label:"Пароль (опционально)",variant:"outlined","prepend-inner-icon":"mdi-lock-outline",rules:[i.password],type:"password",hint:"Если оставить поле пустым, система сгенерирует пароль автоматически.","persistent-hint":"",autocomplete:"new-password"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(N,{type:"info",variant:"tonal",class:"mb-6",border:"start",title:"После запуска"},{default:o(()=>[...e[6]||(e[6]=[p(" После запуска портала вы получите письмо с инструкциями для входа и привязки Telegram-аккаунта. ",-1)])]),_:1}),u("div",I,[t(b,{color:"warning",class:"text-none font-weight-bold",size:"large",type:"submit",loading:f.value},{default:o(()=>[...e[7]||(e[7]=[p(" Зарегистрироваться ",-1)])]),_:1},8,["loading"]),t(b,{to:"https://t.me/cleanupalmaty_bot",color:"primary",variant:"outlined",class:"text-none font-weight-bold",size:"large",target:"_blank"},{default:o(()=>[...e[8]||(e[8]=[p(" Продолжить в Telegram ",-1)])]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{modelValue:r.show,"onUpdate:modelValue":e[4]||(e[4]=s=>r.show=s),color:r.color,timeout:"4000"},{default:o(()=>[p(T(r.message),1)]),_:1},8,["modelValue","color"])])}}}),J=E(M,[["__scopeId","data-v-45677ac3"]]);export{J as default};
